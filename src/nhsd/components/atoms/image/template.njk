{# Set classes #}
{%- set classNames = "nhsd-a-image" -%}
{%- if params.classes -%}
  {%- set classNames = classNames + " " + params.classes -%}
{%- endif -%}

{%- if params.exampleContainer -%}
<div class="cover-image-example-container">
{%- endif -%}

{%- set title = "" %}
{%- if params.title -%}
  {%- set title = 'title="' + params.title + '"' %}
{%- endif -%}

{%- if params.sourceSet and params.alt %}
<figure class="{{ classNames }}" {%- if params.ariaHidden %} aria-hidden="true" {%- endif %}>
  <picture class="nhsd-a-image__picture {{ 'nhsd-!t-margin-bottom-2' if params.caption else '' }}" {{ title|safe }}>
  {%- for source in params.sourceSet %}
  {%-if source.media %}
    <source media="{{ source.media }}" srcset="{{ source.url }}">
  {%- endif -%}
  {%- if source.last or  not source.media %}
    <img src="{{ source.url }}" alt="{{ params.alt }}">
  {% endif -%}
  {% endfor -%}
  </picture>
  {%- if params.caption %}
  <figcaption class="nhsd-t-body-s nhsd-!t-margin-0">{{ params.caption }}</figcaption>
  {% endif -%}
</figure>
{% else %}
No image source found.
{% endif -%}

{%- if params.exampleContainer -%}
</div>
{%- endif -%}
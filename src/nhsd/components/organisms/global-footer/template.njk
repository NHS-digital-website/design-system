{#- Import atom macros -#}
{%- from "../../../njk/macros/atoms.njk" import
  nhsd_a_icon,
  nhsd_a_link
-%}

{#- Import utility macros -#}
{%- from "../../../njk/macros/utilities.njk" import
  nhsd_u_uid
-%}

{#- Set classes -#}
{% set classNames = "nhsd-o-global-footer" %}
{%- if params.classes -%}
  {% set classNames = classNames + " " + params.classes %}
{%- endif -%}

<footer class="{{ classNames }}" id="nhsd-global-footer">
  <div class="nhsd-t-grid">
    <div class="nhsd-t-row">
      {% if params.blocks|length -%}
      <div class="nhsd-t-col-12 nhsd-!t-no-gutters">
        <div class="nhsd-t-grid">
          <div class="nhsd-t-row">
            {% for linkBlock in params.blocks -%}
            {%- set titleId = nhsd_u_uid("footer-heading-") -%}
            <nav class="nhsd-t-col-xs-12 nhsd-t-col-s-6 nhsd-t-col-l-3" {%- if linkBlock.title -%} aria-labelledby="{{ titleId }}"{%- endif -%}>
              {% if params.blocks | last === linkBlock -%}
                <div class="nhsd-t-body-s nhsd-!t-font-weight-bold nhsd-!t-margin-bottom-0" id="{{ titleId }}">{{ linkBlock.title }}</div>
                
              {%- elif linkBlock.title %}
                <div class="nhsd-t-body-s nhsd-!t-font-weight-bold nhsd-!t-margin-bottom-1" id="{{ titleId }}">{{ linkBlock.title }}</div>
              {%- endif %}

              {% if linkBlock.links -%}
              <ul class="nhsd-t-list nhsd-t-list--links">
              {% for link in linkBlock.links -%}
                <li class="nhsd-t-body-s">
                  {% if link.icon -%}
                  {{ nhsd_a_icon(link.icon) }}
                  {%- endif %}

                  {{ nhsd_a_link(link) }}
                </li>
              {%- endfor %}
              </ul>
              {%- endif %}
            </nav>
            {%- endfor %}
          </div>
        </div>
      </div>
      {%- endif %}
    </div>
  </div>
</footer>
